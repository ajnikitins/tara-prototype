<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" href="./img/logo.jpeg" type="image/x-icon"/>
  <link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
  <style>

    .inventory {
      width: 80%;
      height: 20%;
      background: #ae5618;
      border: saddlebrown 2px solid;
      border-radius: 3px;
    }

    .boxBeaker {
      width: 155px;
      height: 170px;
    }

    .boxPaper {
      width: 30px;
      height: 175px;
    }

    .img-overlay {
      position: absolute;
      top: 0;
      left: 0;
    }

    .refresh {
      width: 40px;
      filter: invert(16%) sepia(75%) saturate(7489%) hue-rotate(0deg) brightness(100%) contrast(118%);
    }

    .dipDown {
      z-index: -1;
      position: relative;
      animation-name: dipDown;
      animation-duration: 4s;
    }

    .img-show {
      animation-name: show;
      animation-duration: 2s;
      animation-delay: 2s;
    }

    .img-hide {
      animation-name: hide;
      animation-duration: 2s;
      animation-delay: 2s;
    }

    @keyframes dipDown {
      0% {top: 0;}
      50% {top: 125px;}
      100% {top: 0}
    }

    @keyframes hide {
      0% {opacity: 1;}
      100% {opacity: 0;}
    }

    @keyframes show {
      0% {opacity: 0;}
      100% {opacity: 1;}
    }

    .invalid {
      width: 100%;
      margin-top: 0.25rem;
      font-size: 0.875em;
      color: #dc3545;
    }
  </style>

  <title>TARA.</title>
</head>
<body>
<div class="container-fluid p-4 vh-100">
  <div class="position-relative">
    <button class="position-absolute top-0 end-0 refresh" onclick="location.reload();">
      <img class="" src="./img/refresh.svg" alt="Refresh"/>
    </button>
  </div>
  <div class="row h-100">
    <div class="col-5 h-100 overflow-auto">
      <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
              <strong>Uzdevumi</strong>
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show">
            <div class="accordion-body">
              <div id="page0" class="">
                <h2>Uzdevums Nr. 1</h2><br>
                <p>Sveicināts/-a TARA prototipā!</p>
                <p>
                  Šodien centīsimies praktiski apskatīt pH indikatorus un to pielietojumu šķīdumu pH līmeņa noteikšanai.<br>
                  Iepakojuma kastē atradīsi drošības brilles un cimdus, trīs vārglāzes ar ūdeni, NaOH šķīdumu un CH3COOH šķīdumu, trīs universālindikatora papīrīšus un pH krāsu skalu.<br>
                </p>
                <p class="h6"><strong>NB!</strong> Pirms eksperimenta veikšanas uzvelc brilles un cimdus, lai pasargātu sevi no kaitīgu vielu ietekmes.</p>
                <p>
                  Tavs pirmais uzdevums ir izkārtot vārglāzes uz galda līdzīgi tam, kā ir attēlots bildē.<br>
                  <small>(mērglāžu bildes jāpārvelk uz melnajām kastītēm brīvi izvēlētā kārtībā)</small>
                </p>
                <p class="text-center"><img class="w-75" src="./img/initial.png" alt="Sākuma izkārtojums"></p>
                <p>Kad vārglāzes saliktas, droši spied "Nākamais Uzdevums"!</p>
              </div>
              <div id="page1" class="d-none">
                <h2>Uzdevums Nr. 2</h2>
                <p>Tagad tev būs iespēja novērot indikatorus darbībā.</p>
                <p>
                  Paņem indikatora papīrīti, daļēji iemērc to mērglāzē un izvelc to ārā, noliekot to uz papīra salvetes. Uzreiz pamanīsi, ka papīrīša krāsa sāk mainīties.<br>
                  <small>(papīrīšu bildes jāpārvelk uz melnajām kastītēm brīvi izvēlētā kārtībā)</small>
                </p>
                <p>Video demonstrācija:</p>
                <p class="text-center">
                  <video width="100%" controls>
                    <source src="./img/paperDip.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                  </video>
                </p>
                <p>Kad visās mērglāzēs ir iemērkts pa indikatora papīrītim, dodies uz nākamo uzdevumu!</p>
              </div>
              <div id="page2" class="d-none">
                <h2>Uzdevums Nr. 3</h2>
                <p>Palikusi vēl tikai finiša taisne. Tā tik turpināt!</p>
                <p>Izmantojot pH krāsu skalu, nosaki katra šķīduma pH un izpildi testu!</p>
                <p class="text-center"><img class="w-50" src="./img/final.jpeg" alt="Final step"> </p>
                <form id="form" class="row mt-5">
                  <h6>1. Uzraksti aptuveno pH katram šķīdumam!</h6>
                  <div class="input-group">
                    <label for="phX" class="input-group-text">X</label>
                    <input id="phX" type="text" class="form-control">
                    <label for="phY" class="input-group-text">Y</label>
                    <input id="phY" type="text" class="form-control">
                    <label for="phZ" class="input-group-text">Z</label>
                    <input id="phZ" type="text" class="form-control">
                  </div>
                  <div id="invalid1" class="invalid mb-3"></div>
                  <h6>2. Katram šķīdumam izvēlies vielas grupu – bāziska, neitrāla vai skāba!</h6>
                  <div class="input-group">
                    <label for="stateX" class="input-group-text">X</label>
                    <select class="form-select" id="stateX">
                      <option selected disabled></option>
                      <option value="0">bāziska</option>
                      <option value="1">neitrāla</option>
                      <option value="2">skāba</option>
                    </select>
                    <label for="stateY" class="input-group-text">Y</label>
                    <select class="form-select" id="stateY">
                      <option selected disabled></option>
                      <option value="0">bāziska</option>
                      <option value="1">neitrāla</option>
                      <option value="2">skāba</option>
                    </select>
                    <label for="stateZ" class="input-group-text">Z</label>
                    <select class="form-select" id="stateZ">
                      <option selected disabled></option>
                      <option value="0">bāziska</option>
                      <option value="1">neitrāla</option>
                      <option value="2">skāba</option>
                    </select>
                  </div>
                  <div id="invalid2" class="invalid mb-3"></div>
                  <h6>3. Katram šķīdumam izvēlies vielu, kuras pH visvairāk atbilst izmērītajam!</h6>
                  <div class="input-group">
                    <label for="substanceX" class="input-group-text">X</label>
                    <select class="form-select" id="substanceX">
                      <option selected disabled></option>
                      <option value="0">NaOH</option>
                      <option value="1">CH3COOH</option>
                      <option value="2">H2O</option>
                    </select>
                    <label for="substanceY" class="input-group-text">Y</label>
                    <select class="form-select" id="substanceY">
                      <option selected disabled></option>
                      <option value="0">NaOH</option>
                      <option value="1">CH3COOH</option>
                      <option value="2">H2O</option>
                    </select>
                    <label for="substanceZ" class="input-group-text">Z</label>
                    <select class="form-select" id="substanceZ">
                      <option selected disabled></option>
                      <option value="0">NaOH</option>
                      <option value="1">CH3COOH</option>
                      <option value="2">H2O</option>
                    </select>
                  </div>
                  <div id="invalid3" class="invalid mb-3"></div>
                  <div class="col-auto">
                    <h6><label for="drinkChoice">4. Kuru no šīm vielām tu dzertu?</label></h6>
                    <select class="form-select" id="drinkChoice">
                      <option selected disabled></option>
                      <option value="0">X</option>
                      <option value="1">Y</option>
                      <option value="2">Z</option>
                      <option value="3">Visas</option>
                      <option value="4">Nevienu</option>
                    </select>
                  </div>
                  <div id="invalid4" class="invalid mb-3"></div>
                  <div>
                    <button id="buttonSubmit" class="btn btn-primary" type="button">Nodot</button>
                  </div>
                </form>
              </div>
              <nav>
                <ul class="mt-3 pagination justify-content-center">
                  <li id="buttonPrevPage" class="page-item disabled"><a class="page-link" href="#">Iepriekšējais Uzdevums</a></li>
                  <li id="buttonNextPage" class="page-item"><a class="page-link" href="#">Nākamais Uzdevums</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
              <strong>Teorija</strong>
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse">
            <div class="accordion-body">
              <p>
                Praktiskajam uzdevumam nepieciešamie trauki un vielas: 3 vārglāzītes, 3 šķīdumi X,Y,Z (viens satur no NaOH šķīdumu, otrs CH3COOH, un trešais ir ūdens), univerālindikatora papīrīši.
              </p>
              <p>
                pH ir negatīvais decimāllogaritms no ūdeņraža jonu koncentrācijas. Šo mērvienību lieto, lai noteiktu šķīdumu skābumu vai bāziskumu.<br>
                <var>pH</var> = <var>-lg([H+])</var>
              </p>
              <p>
                Indikatori ir dažādas organiskas vielas, kas ir spējīgas mainīt krāsu atkarībā no vides pH. Piemēram, šajā darbā izmantotais universālindikators ir dažādu indikatoru (fenolftaleīna, metilsarkanā, bromtimolzilā) maisījums, kas ļauj panākt pH noteikšanu daudz plašākā diapazonā (0-14), nekā ar atsevišķiem indikatoriem. Indikatoru darbības princips - indikators protolīzes dēļ var dažādās vidēs pastāvēt gan molekulārajā, gan jonu formā, kurām ir atšķirīgas krāsas.
              </p>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
              <strong>Jautri fakti</strong>
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse">
            <div class="accordion-body">
              <ul>
                <li>Sarkanā kāposta ekstrakts, kas satur antociānu pigmentus, var kalpot kā dabiskais indikators un darbojas līdzīgi kā universālindikators.</li>
                <li>Šāda vides pH mērīšana ir iespējama tikai kvalitatīviem nolūkiem un ar bezkrāsaniem šķīdumiem, taču daudz precīzākus pH mērījumus var panākt ar instrumentālām metodēm (pH-metriem).</li>
                <li>pH diapazons 0-14 ir lietojams tikai ūdens šķīdumiem, taču dažādos organiskajos šķīdinātājos (benzolā, dihlormetānā) šī skala ir daudz plašāka, kas ļauj noteikt pH līdz pat -100 līdz 100 vienību robežās.</li>
                <li>Fluorantimonskābe ir stiprākā superskābe pasaulē (aptuveni 2 * 10^19 reizes stiprāka par 100% H2SO4, pH skalā tas būtu tuvu pie pH=-31)</li>
                <li>orto-Dietilbenzola dianjons ir šobrīrd zināmā spēcīgākā superbāze pasaulē</li>
                <li>Šobrīd plaši lietoto konceptu par pH skalu un skābumu/baziskumu ūdens šķīdumiem 1909. gadā izveodijis dāņu ķīmiķis Søren Sørensen (1868-1939)</li>
                <li>Vissenākais zināmais pH indikators ir no ķērpjiem iegūtstamais lakmuss, ko plaši lietoja jau 14. gadsmintā, novērojot tā dažādās krāsas - skābā vidē sarkans, bāziskā - zils.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-7">
      <div class="d-flex flex-column justify-content-between align-items-center h-100 w-100">
        <img class="img-fluid w-75" src="./img/phscale.jpg" alt="pH scale">
        <div class="flex-grow-1 w-75 mb-5">
          <div class="h-100 d-flex flex-column justify-content-end">
            <div class="d-flex justify-content-around">
              <div id="boxPaper1" class="boxPaper border border-dark d-none" data-position="0" ondrop="dropPaper(event)" ondragover="allowDrop(event)"></div>
              <div id="boxPaper2" class="boxPaper border border-dark d-none" data-position="1" ondrop="dropPaper(event)" ondragover="allowDrop(event)"></div>
              <div id="boxPaper3" class="boxPaper border border-dark d-none" data-position="2" ondrop="dropPaper(event)" ondragover="allowDrop(event)"></div>
            </div>
            <div class="d-flex justify-content-around mt-2">
              <div id="boxBeaker1" class="boxBeaker border border-dark" data-position="0" ondrop="dropBeaker(event)" ondragover="allowDrop(event)"></div>
              <div id="boxBeaker2" class="boxBeaker border border-dark" data-position="1" ondrop="dropBeaker(event)" ondragover="allowDrop(event)"></div>
              <div id="boxBeaker3" class="boxBeaker border border-dark" data-position="2" ondrop="dropBeaker(event)" ondragover="allowDrop(event)"></div>
            </div>
          </div>
        </div>
        <div class="inventory">
          <div class="d-flex p-2 h-100 justify-content-around">
            <img id="beakerX" class="img-fluid" src="./img/beakerX.png" alt="Beaker X" draggable="true" ondragstart="drag(event)">
            <img id="beakerY" class="img-fluid" src="./img/beakerY.png" alt="Beaker Y" draggable="true" ondragstart="drag(event)">
            <img id="beakerZ" class="img-fluid" src="./img/beakerZ.png" alt="Beaker Z" draggable="true" ondragstart="drag(event)">
            <img id="paper1" class="img-fluid border border-warning" src="./img/paper.png" alt="Paper" draggable="true" ondragstart="drag(event)">
            <img id="paper2" class="img-fluid border border-warning" src="./img/paper.png" alt="Paper" draggable="true" ondragstart="drag(event)">
            <img id="paper3" class="img-fluid border border-warning" src="./img/paper.png" alt="Paper" draggable="true" ondragstart="drag(event)">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="finishModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="finishModalLabel">Ir pienākušas eksperimenta beigas!</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        Paldies, ka izmēģinājāt TARA. prototipu!<br>
        Palikuši ir vēl tikai pāris jautājumi! :)
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aizvērt</button>
      </div>
    </div>
  </div>
</div>
<script>
  const form = document.getElementById("form");
  const buttonSubmit = document.getElementById("buttonSubmit");

  buttonSubmit.addEventListener("click", (ev) => {
      ev.preventDefault();

      const phX = document.getElementById("phX");
      const phY = document.getElementById("phY");
      const phZ = document.getElementById("phZ");
      const invalid1 = document.getElementById("invalid1");

      if (!phX.value || !phY.value || !phZ.value) {
        invalid1.innerText = "Lūdzu, aizpildi visu";
      } else if (phX.value !== "7" || phY.value !== "13" || phZ.value !== "2") {
        invalid1.innerText = "Nepareizi (7; 13; 2)";
      } else {
        invalid1.innerText = "";
      }

      const stateX = document.getElementById("stateX");
      const stateY = document.getElementById("stateY");
      const stateZ = document.getElementById("stateZ");
      const invalid2 = document.getElementById("invalid2");
      if (!stateX.value || !stateY.value || !stateZ.value) {
        invalid2.innerText = "Lūdzu, aizpildi visu";
      } else if (stateX.value !== "1" || stateY.value !== "0" || stateZ.value !== "2") {
        invalid2.innerText = "Nepareizi (neitrāla; bāziska; skāba)";
      } else {
        invalid2.innerText = "";
      }

    const substanceX = document.getElementById("substanceX");
    const substanceY = document.getElementById("substanceY");
    const substanceZ = document.getElementById("substanceZ");
    const invalid3 = document.getElementById("invalid3");
    if (!substanceX.value || !substanceY.value || !substanceZ.value) {
      invalid3.innerText = "Lūdzu, aizpildi visu";
    } else if (substanceX.value !== "2" || substanceY.value !== "0" || substanceZ.value !== "1") {
      invalid3.innerText = "Nepareizi (H20; NaOH; CH3COOH)";
    } else {
      invalid3.innerText = "";
    }

    const drinkChoice = document.getElementById("drinkChoice");
    const invalid4 = document.getElementById("invalid4");
    if (!drinkChoice.value) {
      invalid4.innerText = "Lūdzu, aizpildi visu";
    } else if (drinkChoice.value !== "4") {
      invalid4.innerText = "NEKĀDĀ GADĪJUMĀ NEDZER NO LABORATORIJAS TRAUKIEM!!!";
    } else {
      invalid4.innerText = "";
    }

    if (invalid1.innerText === "" && invalid2.innerText === "" && invalid3.innerText === "" && invalid4.innerText === "") {
      const modal = new bootstrap.Modal(document.getElementById("finishModal"));
      modal.show();
    }

  }, false);
</script>
<script>
  const buttonNextPage = document.getElementById("buttonNextPage");
  const buttonPrevPage = document.getElementById("buttonPrevPage");

  const maxPages = 3;
  let selectedPageNum = 0;

  buttonNextPage.addEventListener("click", (ev) => {
    ev.preventDefault();
    restartVideos();
    nextPage();
  })

  buttonPrevPage.addEventListener("click", (ev) => {
    ev.preventDefault();
    restartVideos();
    prevPage();
  })

  function restartVideos() {
    const videos = document.getElementsByTagName("video");
    for (let video of videos) {
      video.pause();
      video.currentTime = 0;
    }
  }

  function nextPage() {
    if (selectedPageNum < maxPages - 1) {
      const currentPage = document.getElementById(`page${selectedPageNum}`);
      const nextPage = document.getElementById(`page${selectedPageNum + 1}`);

      currentPage.classList.toggle("d-none");
      nextPage.classList.toggle("d-none");

      if (selectedPageNum === 0) {
        buttonPrevPage.classList.remove("disabled");
      }

      selectedPageNum++;

      if (selectedPageNum === maxPages - 1) {
        buttonNextPage.classList.add("disabled");
      }
    }
  }

  function prevPage() {
    if (selectedPageNum > 0) {
      const currentPage = document.getElementById(`page${selectedPageNum}`);
      const prevPage = document.getElementById(`page${selectedPageNum - 1}`);

      currentPage.classList.toggle("d-none");
      prevPage.classList.toggle("d-none");

      if (selectedPageNum === maxPages - 1) {
        buttonNextPage.classList.remove("disabled");
      }

      selectedPageNum--;

      if (selectedPageNum === 0) {
        buttonPrevPage.classList.add("disabled");
      }
    }
  }
</script>
<script>
  let currentlyDragged = "";

  const beakerState = ["", "", ""];

  function allowDrop(ev) {
    if (ev.target.classList.contains("boxBeaker") && currentlyDragged.includes("beaker")
        || ev.target.classList.contains("boxPaper") && currentlyDragged.includes("paper")) {
      ev.preventDefault();
    }
  }

  function drag(ev) {
    currentlyDragged = ev.target.id;
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function dropBeaker(ev) {
    ev.preventDefault();
    const data = ev.dataTransfer.getData("text");
    const beaker = document.getElementById(data);
    const box = ev.target;

    beaker.draggable = false;
    box.classList.remove("border");
    beakerState[box.dataset.position] = beaker.id;

    box.appendChild(document.getElementById(data));

    if (!beakerState.includes("")) {
      const boxes = document.getElementsByClassName("boxPaper");
      for (let box of boxes) {
        box.classList.remove("d-none");
      }
    }
  }

  function dropPaper(ev) {
    ev.preventDefault();
    const data = ev.dataTransfer.getData("text");
    const paper = document.getElementById(data);
    const box = ev.target;

    paper.draggable = false;
    box.classList.remove("border");

    const beaker = beakerState[box.dataset.position];
    let newPaper = "";

    switch (beaker) {
      case "beakerX":
        newPaper = "paperX";
        break;

      case "beakerY":
        newPaper = "paperY";
        break;

      case "beakerZ":
        newPaper = "paperZ";
        break;
    }

    const newImg = document.createElement("img");
    newImg.src = `./img/${newPaper}.png`;
    newImg.classList.add("img-overlay", "img-fluid", "border", "border-warning");

    const oldImg = document.getElementById(data)

    box.appendChild(newImg);
    box.appendChild(oldImg);

    box.classList.add("dipDown");
    oldImg.classList.add("img-hide");
    newImg.classList.add("img-show");
  }
</script>
<script src="./js/bootstrap.bundle.js"></script>
</body>
</html>
