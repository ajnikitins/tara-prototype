<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
  <style>
    #headingOne > button::after {
      content: none;
    }

    .inventory {
      width: 80%;
      height: 20%;
      background: #ae5618;
      border: saddlebrown 2px solid;
      border-radius: 3px;
    }

    .boxBeaker {
      width: 155px;
      height: 170px;
    }

    .boxPaper {
      width: 30px;
      height: 175px;
    }

    .img-overlay {
      position: absolute;
      top: 0;
      left: 0;
    }

    .refresh {
      width: 40px;
      filter: invert(16%) sepia(75%) saturate(7489%) hue-rotate(0deg) brightness(100%) contrast(118%);
    }

    .dipDown {
      z-index: -1;
      position: relative;
      animation-name: dipDown;
      animation-duration: 4s;
    }

    .img-show {
      animation-name: show;
      animation-duration: 2s;
      animation-delay: 2s;
    }

    .img-hide {
      animation-name: hide;
      animation-duration: 2s;
      animation-delay: 2s;
    }

    @keyframes dipDown {
      0% {top: 0;}
      50% {top: 125px;}
      100% {top: 0}
    }

    @keyframes hide {
      0% {opacity: 1;}
      100% {opacity: 0;}
    }

    @keyframes show {
      0% {opacity: 0;}
      100% {opacity: 1;}
    }
  </style>

  <title>TARA</title>
</head>
<body>
<div class="container-fluid p-4 vh-100">
  <div class="position-relative">
    <button class="position-absolute top-0 end-0 refresh" onclick="location.reload();">
      <img class="" src="./img/refresh.svg" alt="Refresh"/>
    </button>
  </div>
  <div class="row h-100">
    <div class="col-5 overflow-auto">
      <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" disabled>
              <strong>Uzdevumi</strong>
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show">
            <div class="accordion-body">
              <p>

              </p>
              <nav>
                <ul class="pagination justify-content-center">
                  <li class="page-item"><a class="page-link" href="#">Iepriekšējais Uzdevums</a></li>
                  <li class="page-item"><a class="page-link" href="#">Nākamais Uzdevums</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
              <strong>Teorija</strong>
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse">
            <div class="accordion-body">
              <p>
                Praktiskajam uzdevumam nepieciešamie trauki un vielas: 3 vārglāzītes, 3 šķīdumi X,Y,Z (viens satur no NaOH šķīdumu, otrs CH3COOH, un trešais ir ūdens), univerālindikatora papīrīši.
              </p>
              <p>
                pH ir negatīvais decimāllogaritms no ūdeņraža jonu koncentrācijas. Šo mērvienību lieto, lai noteiktu šķīdumu skābumu vai baziskumu. pH = -lg([H+]).
              </p>
              <p>
                Indikatori ir dažādas organiskas vielas, kas ir spējīgas mainīt krāsu atkarībā no vides pH. Piemēram, šajā darbā izmantotais universālindikators ir dažādu indikatoru (fenolftaleīna, metilsarkanā, bromtimolzilā) maisījums, kas ļauj panākt pH noteikšanu daudz plašākā diapazonā (0-14), nekā ar atsevišķiem indikatoriem. Indikatoru darbības princips - indikators protolīzes dēļ var dažādās vidēs pastāvēt gan molekulārajā, gan jonu formā, kurām ir atšķirīgas krāsas.
              </p>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
              <strong>Jautri fakti</strong>
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse">
            <div class="accordion-body">
              <ul>
                <li>Sarkanā kāposta ekstrakts, kas satur antociānu pigmentus, var kalpot kā dabiskais indikators un darbojas līdzīgi kā universālindikators.</li>
                <li>Šāda vides pH mērīšana ir iespējama tikai kvalitatīviem nolūkiem un ar bezkrāsaniem šķīdumiem, taču daudz precīzākus pH mērījumus var panākt ar instrumentālām metodēm (pH-metriem).</li>
                <li>pH diapazons 0-14 ir lietojams tikai ūdens šķīdumiem, taču dažādos organiskajos šķīdinātājos (benzolā, dihlormetānā) šī skala ir daudz plašāka, kas ļauj noteikt pH līdz pat -100 līdz 100 vienību robežās.</li>
                <li>Fluorantimonskābe ir stiprākā superskābe pasaulē (aptuveni 2 * 10^19 reizes stiprāka par 100% H2SO4, pH skalā tas būtu tuvu pie pH=-31)</li>
                <li>orto-Dietilbenzola dianjons ir šobrīrd zināmā spēcīgākā superbāze pasaulē</li>
                <li>Šobrīd plaši lietoto konceptu par pH skalu un skābumu/baziskumu ūdens šķīdumiem 1909. gadā izveodijis dāņu ķīmiķis Søren Sørensen (1868-1939)</li>
                <li>Vissenākais zināmais pH indikators ir no ķērpjiem iegūtstamais lakmuss, ko plaši lietoja jau 14. gadsmintā, novērojot tā dažādās krāsas - skābā vidē sarkans, bāziskā - zils.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-7">
      <div class="d-flex flex-column justify-content-between align-items-center h-100 w-100">
        <img class="img-fluid w-75" src="./img/phscale.jpg" alt="pH scale">
        <div class="flex-grow-1 w-75 mb-5">
          <div class="h-100 d-flex flex-column justify-content-end">
            <div class="d-flex justify-content-around">
              <div id="boxPaper1" class="boxPaper border border-dark d-none" data-position="0" ondrop="dropPaper(event)" ondragover="allowDrop(event)"></div>
              <div id="boxPaper2" class="boxPaper border border-dark d-none" data-position="1" ondrop="dropPaper(event)" ondragover="allowDrop(event)"></div>
              <div id="boxPaper3" class="boxPaper border border-dark d-none" data-position="2" ondrop="dropPaper(event)" ondragover="allowDrop(event)"></div>
            </div>
            <div class="d-flex justify-content-around mt-2">
              <div id="boxBeaker1" class="boxBeaker border border-dark" data-position="0" ondrop="dropBeaker(event)" ondragover="allowDrop(event)"></div>
              <div id="boxBeaker2" class="boxBeaker border border-dark" data-position="1" ondrop="dropBeaker(event)" ondragover="allowDrop(event)"></div>
              <div id="boxBeaker3" class="boxBeaker border border-dark" data-position="2" ondrop="dropBeaker(event)" ondragover="allowDrop(event)"></div>
            </div>
          </div>
        </div>
        <div class="inventory">
          <div class="d-flex p-2 h-100 justify-content-around">
            <img id="beakerX" class="img-fluid" src="./img/beakerX.png" alt="Beaker X" draggable="true" ondragstart="drag(event)">
            <img id="beakerY" class="img-fluid" src="./img/beakerY.png" alt="Beaker Y" draggable="true" ondragstart="drag(event)">
            <img id="beakerZ" class="img-fluid" src="./img/beakerZ.png" alt="Beaker Z" draggable="true" ondragstart="drag(event)">
            <img id="paper1" class="img-fluid border border-warning" src="./img/paper.png" alt="Paper" draggable="true" ondragstart="drag(event)">
            <img id="paper2" class="img-fluid border border-warning" src="./img/paper.png" alt="Paper" draggable="true" ondragstart="drag(event)">
            <img id="paper3" class="img-fluid border border-warning" src="./img/paper.png" alt="Paper" draggable="true" ondragstart="drag(event)">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  let currentlyDragged = "";

  const state = ["", "", ""];

  function allowDrop(ev) {
    if (ev.target.classList.contains("boxBeaker") && currentlyDragged.includes("beaker")
        || ev.target.classList.contains("boxPaper") && currentlyDragged.includes("paper")) {
      ev.preventDefault();
    }
  }

  function drag(ev) {
    currentlyDragged = ev.target.id;
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function dropBeaker(ev) {
    ev.preventDefault();
    const data = ev.dataTransfer.getData("text");
    const beaker = document.getElementById(data);
    const box = ev.target;

    beaker.draggable = false;
    box.classList.remove("border");
    state[box.dataset.position] = beaker.id;

    box.appendChild(document.getElementById(data));

    if (!state.includes("")) {
      const boxes = document.getElementsByClassName("boxPaper");
      for (let box of boxes) {
        box.classList.remove("d-none");
      }
    }
  }

  function dropPaper(ev) {
    ev.preventDefault();
    const data = ev.dataTransfer.getData("text");
    const paper = document.getElementById(data);
    const box = ev.target;

    paper.draggable = false;
    box.classList.remove("border");

    const beaker = state[box.dataset.position];
    let newPaper = "";

    switch (beaker) {
      case "beakerX":
        newPaper = "paperX";
        break;

      case "beakerY":
        newPaper = "paperY";
        break;

      case "beakerZ":
        newPaper = "paperZ";
        break;
    }

    const newImg = document.createElement("img");
    newImg.src = `./img/${newPaper}.png`;
    newImg.classList.add("img-overlay", "img-fluid", "border", "border-warning");

    const oldImg = document.getElementById(data)

    box.appendChild(newImg);
    box.appendChild(oldImg);

    box.classList.add("dipDown");
    oldImg.classList.add("img-hide");
    newImg.classList.add("img-show");
  }
</script>
<script src="./js/bootstrap.bundle.js"></script>
</body>
</html>
